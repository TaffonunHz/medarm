<!doctype html>
<html lang="az">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MedArm — Robot-cərrahi qol</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root{
 --bg:#f6f7fb;
 --card:#ffffff;
 --accent:#0b63ff;
 --muted:#6b7280;
 --text:#0f172a;
 --radius:12px;
 --max-width:1100px;
 --gap:24px;
 --nav-height:68px;
 --glass:rgba(255,255,255,0.6);
 --danger:#ef4444;
 --success:#10b981;
 --warning:#f59e0b;
 --info:#06b6d4;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
 margin:0;
 font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
 background:linear-gradient(180deg,var(--bg),#eef2ff 100%);
 color:var(--text);
 -webkit-font-smoothing:antialiased;
 -moz-osx-font-smoothing:grayscale;
 line-height:1.45;
 padding:0 16px 48px;
}
.wrap{max-width:var(--max-width);margin:0 auto}
/* NAV */
#nav-toggle{display:none}
header{
 position:sticky;
 top:0;
 z-index:40;
 transition: transform 260ms cubic-bezier(.2,.9,.2,1), opacity 200ms ease;
 will-change: transform;
 pointer-events: auto;
}
header.hidden{
 transform: translateY(-120%);
 opacity:0;
 pointer-events: none;
}
header.visible{
 transform: translateY(0);
 opacity:1;
}
.nav{
 height:var(--nav-height);
 display:flex;align-items:center;justify-content:space-between;
 gap:12px;padding:10px;border-radius:14px;
 background:linear-gradient(180deg,var(--card),rgba(255,255,255,0.95));
 box-shadow:0 6px 18px rgba(11,99,255,0.06);
 backdrop-filter: blur(6px);
}
.brand{display:flex;align-items:center;gap:12px}
.logo{height:44px;width:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#6dd3ff);display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:18px}
.brand h1{margin:0;font-size:18px;letter-spacing:-0.2px}
nav ul{display:flex;gap:14px;align-items:center;list-style:none;margin:0;padding:0}
nav a{color:var(--muted);text-decoration:none;padding:8px 12px;border-radius:8px;font-weight:600;transition:all 0.2s ease}
nav a:hover{color:var(--accent)}
.admin-btn {
 background:var(--accent) !important;
 color:white !important;
 margin-left:8px;
}
.admin-btn:hover {
 background:#0952d9 !important;
 color:white !important;
}
.hamburger{display:none}
/* HERO */
.hero{display:grid;grid-template-columns:1fr 420px;gap:var(--gap);align-items:center;padding:48px 8px}
.lead{padding:18px;border-radius:12px}
.title{font-size:34px;margin:12px 0 6px;font-weight:700}
.desc{color:var(--muted);margin-bottom:18px;line-height:1.6}
.btn{display:inline-block;background:var(--accent);color:white;padding:12px 18px;border-radius:10px;text-decoration:none;font-weight:700;transition:all 0.2s ease}
.btn:hover{background:#0952d9;transform:translateY(-1px)}
.hero-card{background:linear-gradient(180deg,rgba(255,255,255,0.7),#fff);padding:18px;border-radius:16px;box-shadow:0 8px 30px rgba(11,99,255,0.06)}
.mock{height:320px;border-radius:10px;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#f8fafc,#eef4ff);color:var(--muted);font-weight:600;padding:12px;text-align:center}
/* Sections */
section{margin-top:32px}
.section-title{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}
h2{margin:0;font-size:20px;font-weight:700}
/* About */
.about{display:grid;grid-template-columns:1fr 360px;gap:20px;align-items:start}
.about .media{display:flex;flex-direction:column;gap:12px}
.img-wrap{position:relative;border-radius:10px;overflow:hidden;background:#fff;display:flex;align-items:center;justify-content:center;transition:transform 0.2s ease}
.img-wrap:hover{transform:translateY(-2px)}
.img-wrap img{width:100%;height:100%;object-fit:cover;display:block}
.img-wrap svg{width:80%;height:80%;display:block;opacity:0.92}
/* Overlay icons */
.overlay{position:absolute;right:10px;bottom:10px;background:rgba(11,99,255,0.12);backdrop-filter:blur(6px);padding:8px;border-radius:10px;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity 0.2s ease}
.img-wrap:hover .overlay{opacity:1}
.overlay svg{width:18px;height:18px;display:block}
/* Gallery */
.gallery-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.gallery-grid .img-wrap{height:160px;position:relative;border-radius:10px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:#fff;cursor:zoom-in}
.gallery-grid img{max-width:90%;max-height:90%;object-fit:contain;display:block;transition:transform .2s ease}
.gallery-grid img:hover{transform:scale(1.03)}
.gallery-grid video{max-width:90%;max-height:90%;object-fit:contain;display:block}
.video-overlay{position:absolute;inset:0;background:rgba(0,0,0,0.3);display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity 0.2s ease;cursor:pointer}
.gallery-grid .img-wrap[data-type="video"]:hover .video-overlay{opacity:1}
.play-button{width:40px;height:40px;background:rgba(255,255,255,0.9);border-radius:50%;display:flex;align-items:center;justify-content:center;color:var(--accent);font-size:16px}
/* Contact */
.contacts{display:flex;gap:18px;flex-wrap:wrap}
.contact-card{background:var(--card);padding:16px;border-radius:12px;min-width:220px;flex:1;box-shadow:0 4px 20px rgba(2,6,23,0.04)}
.contact-card a{display:block;color:var(--accent);font-weight:600;text-decoration:none;margin-top:6px;transition:color 0.2s ease}
.contact-card a:hover{color:#0952d9}
.socials{display:flex;gap:10px;margin-top:8px}
.socials a{display:inline-flex;align-items:center;justify-content:center;width:42px;height:42px;border-radius:8px;background:var(--glass);text-decoration:none;transition:all 0.2s ease}
.socials a:hover{background:var(--accent);color:white;transform:translateY(-1px)}
footer{margin-top:36px;padding:18px 8px;text-align:center;color:var(--muted)}
/* Admin Panel */
.admin-panel {
 position: fixed;
 inset: 0;
 background: rgba(0, 0, 0, 0.7);
 display: flex;
 align-items: center;
 justify-content: center;
 z-index: 10000;
 opacity: 0;
 visibility: hidden;
 transition: all 0.3s ease;
 backdrop-filter: blur(4px);
 pointer-events: none;
}
.admin-panel.show {
 opacity: 1;
 visibility: visible;
 pointer-events: auto;
}
.admin-content {
 background: var(--card);
 padding: 32px;
 border-radius: 16px;
 box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
 max-width: 800px;
 width: 95%;
 max-height: 90vh;
 overflow-y: auto;
 position: relative;
 animation: slideUp 0.3s ease-out;
}
@keyframes slideUp {
 from { opacity: 0; transform: translateY(20px); }
 to { opacity: 1; transform: translateY(0); }
}
.admin-close {
 position: absolute;
 top: 12px;
 right: 12px;
 background: none;
 border: none;
 font-size: 20px;
 cursor: pointer;
 color: var(--muted);
 transition: color 0.2s ease;
 padding: 4px;
}
.admin-close:hover {
 color: var(--text);
}
.admin-title {
 font-size: 24px;
 font-weight: 700;
 text-align: center;
 margin-bottom: 24px;
 color: var(--text);
}
.form-group {
 margin-bottom: 20px;
}
.form-label {
 display: block;
 margin-bottom: 6px;
 font-weight: 600;
 color: var(--text);
 font-size: 14px;
}
.form-input, .admin-input {
 width: 100%;
 padding: 12px 14px;
 border: 2px solid #e5e7eb;
 border-radius: 8px;
 font-family: inherit;
 font-size: 14px;
 transition: border-color 0.2s ease;
 background: white;
}
.form-input:focus, .admin-input:focus {
 outline: none;
 border-color: var(--accent);
}
.login-btn, .add-item-btn, .save-btn {
 background: var(--accent);
 color: white;
 border: none;
 padding: 12px;
 border-radius: 8px;
 font-weight: 600;
 font-size: 14px;
 cursor: pointer;
 transition: all 0.2s ease;
}
.add-item-btn {
 background: var(--success);
 width: auto;
 padding: 10px 16px;
}
.save-btn {
 background: var(--info);
 width: 100%;
 margin-top: 10px;
}
.login-btn:hover, .add-item-btn:hover, .save-btn:hover {
 transform: translateY(-1px);
}
.login-btn:hover { background: #0952d9; }
.add-item-btn:hover { background: #059669; }
.save-btn:hover { background: #0891b2; }
.error-message {
 color: var(--danger);
 font-size: 13px;
 margin-top: 8px;
 text-align: center;
}
.success-message {
 color: var(--success);
 font-size: 13px;
 margin-top: 8px;
 text-align: center;
}
.admin-dashboard {
 display: none;
}
.admin-dashboard.show {
 display: block;
}
.dashboard-header {
 display: flex;
 justify-content: space-between;
 align-items: center;
 margin-bottom: 24px;
 padding-bottom: 12px;
 border-bottom: 1px solid #e5e7eb;
}
.logout-btn {
 background: var(--danger);
 color: white;
 border: none;
 padding: 6px 12px;
 border-radius: 6px;
 font-size: 13px;
 cursor: pointer;
 transition: all 0.2s ease;
}
.logout-btn:hover {
 background: #dc2626;
 transform: translateY(-1px);
}
.dashboard-section {
 margin-bottom: 24px;
 padding: 16px;
 background: #f8fafc;
 border-radius: 8px;
}
.dashboard-section h3 {
 margin: 0 0 16px;
 color: var(--accent);
 font-size: 16px;
 font-weight: 600;
}
.gallery-admin-controls {
 display: grid;
 grid-template-columns: 1fr auto;
 gap: 12px;
 margin-bottom: 16px;
 align-items: end;
}
.admin-gallery-grid {
 display: grid;
 grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
 gap: 12px;
 max-height: 300px;
 overflow-y: auto;
 padding: 8px;
 background: white;
 border-radius: 8px;
 border: 1px solid #e5e7eb;
}
.admin-gallery-item {
 background: white;
 border-radius: 8px;
 overflow: hidden;
 box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
 position: relative;
 transition: transform 0.2s ease;
}
.admin-gallery-item:hover {
 transform: translateY(-2px);
}
.admin-gallery-item img, .admin-gallery-item video {
 width: 100%;
 height: 80px;
 object-fit: cover;
}
.admin-item-controls {
 padding: 6px;
 display: flex;
 justify-content: space-between;
 align-items: center;
 background: #f8fafc;
 font-size: 12px;
}
.admin-remove-btn {
 background: var(--danger);
 color: white;
 border: none;
 padding: 2px 6px;
 border-radius: 3px;
 font-size: 11px;
 cursor: pointer;
 transition: background 0.2s ease;
}
.admin-remove-btn:hover {
 background: #dc2626;
}
.admin-tabs {
 display: flex;
 gap: 8px;
 margin-bottom: 20px;
 border-bottom: 1px solid #e5e7eb;
}
.admin-tab {
 padding: 8px 16px;
 background: none;
 border: none;
 border-radius: 6px 6px 0 0;
 cursor: pointer;
 font-size: 14px;
 font-weight: 600;
 color: var(--muted);
 transition: all 0.2s ease;
}
.admin-tab.active {
 color: var(--accent);
 background: #f0f7ff;
 border-bottom: 2px solid var(--accent);
}
.content-tab {
 display: none;
}
.content-tab.active {
 display: block;
}
.text-editor {
 min-height: 120px;
 border: 1px solid #e5e7eb;
 border-radius: 8px;
 padding: 12px;
 background: white;
}
.text-editor:focus {
 outline: none;
 border-color: var(--accent);
}
.stats-grid {
 display: grid;
 grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
 gap: 12px;
 margin-bottom: 16px;
}
.stat-card {
 background: white;
 padding: 16px;
 border-radius: 8px;
 text-align: center;
 box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}
.stat-number {
 font-size: 24px;
 font-weight: 700;
 color: var(--accent);
 margin-bottom: 4px;
}
.stat-label {
 font-size: 12px;
 color: var(--muted);
}
.upload-area {
 border: 2px dashed #e5e7eb;
 border-radius: 8px;
 padding: 20px;
 text-align: center;
 cursor: pointer;
 transition: all 0.2s ease;
 margin-bottom: 12px;
}
.upload-area:hover {
 border-color: var(--accent);
 background: #f0f7ff;
}
.upload-area.dragover {
 border-color: var(--accent);
 background: #e0f2fe;
}
/* Modal */
.image-modal {
 position: fixed;
 inset: 0;
 background: rgba(0, 0, 0, 0.8);
 display: flex;
 align-items: center;
 justify-content: center;
 z-index: 9999;
 cursor: zoom-out;
 visibility: hidden;
 opacity: 0;
 transition: opacity 200ms ease;
}
.image-modal.show {
 visibility: visible;
 opacity: 1;
}
.image-modal img, .image-modal video {
 max-width: 95%;
 max-height: 95%;
 border-radius: 8px;
 box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
}
/* Responsive */
@media (max-width:1000px){
 .hero{grid-template-columns:1fr}
 .about{grid-template-columns:1fr}
 .gallery-grid{grid-template-columns:repeat(2,1fr)}
 .admin-content {
  max-width: 95%;
  padding: 20px;
 }
}
@media (max-width:640px){
 .nav{padding:8px}
 nav ul{display:none}
 .hamburger{display:block}
 #nav-toggle:checked ~ header .nav .nav-links{display:flex}
 .nav-links{position:fixed;inset:0;top:72px;background:linear-gradient(180deg,#ffffff,rgba(240,248,255,0.95));backdrop-filter: blur(6px);padding:28px;display:none;flex-direction:column}
 .hero{padding:28px 6px}
 .gallery-grid{grid-template-columns:1fr}
 .mock{height:220px}
 .admin-content {
  padding: 16px;
  margin: 10px;
 }
 .gallery-admin-controls {
  grid-template-columns: 1fr;
  gap: 8px;
 }
 .admin-tabs {
  flex-wrap: wrap;
 }
 .stats-grid {
  grid-template-columns: 1fr;
 }
}
/* utility */
.muted{color:var(--muted)}
.small{font-size:13px}
.hidden{display:none!important}
</style>
</head>
<body>
<div class="wrap">
 <input id="nav-toggle" type="checkbox" aria-hidden="true">
 <header class="visible">
  <div class="nav">
   <div class="brand">
    <div class="logo" aria-hidden="true">🤖</div>
    <div>
     <h1>MedArm</h1>
     <div class="small muted">Robot-cərrahi qol</div>
    </div>
   </div>
   <nav>
    <div class="nav-links">
     <ul>
      <li><a href="#home">Baş səhifə</a></li>
      <li><a href="#about">Haqqımızda</a></li>
      <li><a href="#gallery">Qalereya</a></li>
      <li><a href="#contact">Əlaqə</a></li>
      <li><a href="#" class="admin-btn" data-action="admin">Admin</a></li>
     </ul>
    </div>
   </nav>
   <div class="hamburger" title="Menyu">
    <label for="nav-toggle" style="cursor:pointer;padding:8px;border-radius:8px;display:flex;align-items:center;">
     <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M4 7H20M4 12H20M4 17H20" stroke="#0f172a" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
     </svg>
    </label>
   </div>
  </div>
 </header>

 <!-- Admin Panel -->
 <div id="adminPanel" class="admin-panel" aria-hidden="true">
  <div class="admin-content" role="dialog" aria-modal="true" aria-labelledby="admin-title">
   <button class="admin-close" onclick="closeAdminPanel()" aria-label="Close admin panel">&times;</button>
   
   <!-- Login Form -->
   <div id="loginForm">
    <h2 id="admin-title" class="admin-title">Admin Girişi</h2>
    <form onsubmit="adminLogin(event)">
     <div class="form-group">
      <label class="form-label">İstifadəçi adı</label>
      <input type="text" id="username" class="form-input" required>
     </div>
     <div class="form-group">
      <label class="form-label">Parol</label>
      <input type="password" id="password" class="form-input" required>
     </div>
     <button type="submit" class="login-btn">Giriş</button>
     <div id="loginError" class="error-message" style="display:none;"></div>
    </form>
   </div>

   <!-- Admin Dashboard -->
   <div id="adminDashboard" class="admin-dashboard" aria-hidden="true">
    <div class="dashboard-header">
     <h2 class="admin-title">Admin Panel</h2>
     <button class="logout-btn" onclick="adminLogout()">Çıxış</button>
    </div>

    <div class="admin-tabs">
     <button class="admin-tab active" onclick="switchTab('gallery')">Qalereya</button>
     <button class="admin-tab" onclick="switchTab('content')">Məzmun</button>
     <button class="admin-tab" onclick="switchTab('settings')">Ayarlar</button>
     <button class="admin-tab" onclick="switchTab('stats')">Statistika</button>
    </div>

    <!-- Gallery Tab -->
    <div id="gallery-tab" class="content-tab active">
     <div class="dashboard-section">
      <h3>Qalereya İdarəetməsi</h3>
      
      <div class="stats-grid">
       <div class="stat-card">
        <div class="stat-number" id="totalImages">0</div>
        <div class="stat-label">Ümumi Şəkil</div>
       </div>
       <div class="stat-card">
        <div class="stat-number" id="totalVideos">0</div>
        <div class="stat-label">Ümumi Video</div>
       </div>
       <div class="stat-card">
        <div class="stat-number" id="totalItems">0</div>
        <div class="stat-label">Ümumi Element</div>
       </div>
      </div>

      <div class="upload-area" id="uploadArea" onclick="document.getElementById('fileInput').click()">
       <svg width="48" height="48" viewBox="0 0 24 24" fill="none" style="margin-bottom:8px;">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="#6b7280" stroke-width="1.5"/>
        <polyline points="14,2 14,8 20,8" stroke="#6b7280" stroke-width="1.5"/>
        <line x1="16" y1="13" x2="8" y2="13" stroke="#6b7280" stroke-width="1.5"/>
        <line x1="12" y1="17" x2="12" y2="9" stroke="#6b7280" stroke-width="1.5"/>
       </svg>
       <p>Faylı buraya sürükləyin və ya klikləyin</p>
       <small class="muted">Dəstəklənən formatlar: JPG, PNG, GIF, WebP, MP4, WebM, OGG, MOV, AVI</small>
      </div>
    <input type="file" id="fileInput" multiple accept="image/*,video/mp4,video/webm,video/ogg,video/quicktime" style="display:none" onchange="handleFileUpload(this.files)">

      <div class="gallery-admin-controls">
       <input type="url" id="adminImageUrl" class="admin-input" placeholder="Şəkil URL-i daxil edin...">
       <button onclick="addImageAdmin()" class="add-item-btn">Şəkil Əlavə Et</button>
      </div>
      <div class="gallery-admin-controls">
       <input type="url" id="adminVideoUrl" class="admin-input" placeholder="Video URL-i daxil edin...">
       <button onclick="addVideoAdmin()" class="add-item-btn">Video Əlavə Et</button>
      </div>
      
      <div class="admin-gallery-grid" id="adminGalleryGrid" aria-live="polite">
       <!-- Admin gallery items will be populated here -->
      </div>
     </div>
    </div>

    <!-- Content Tab -->
    <div id="content-tab" class="content-tab">
     <div class="dashboard-section">
      <h3>Məzmun Redaktəsi</h3>
      
      <div class="form-group">
       <label class="form-label">Başlıq</label>
       <input type="text" id="contentTitle" class="admin-input" value="MedArm" placeholder="Sayt başlığı...">
      </div>
      
      <div class="form-group">
       <label class="form-label">Açıqlama</label>
       <textarea id="contentDescription" class="admin-input text-editor" placeholder="Sayt açıqlaması...">Robot-cərrahi qol — məsafədən əməliyyatlar üçün dəqiq və etibarlı həll. Klinikalar üçün uzaqdan nəzarət və yüksək dəqiqlik.</textarea>
      </div>
      
      <div class="form-group">
       <label class="form-label">Haqqımızda mətni</label>
       <textarea id="contentAbout" class="admin-input text-editor" placeholder="Haqqımızda mətni...">MedArm — məsafədən cərrahiyyə dəstəyi üçün hazırlanmış robot-cərrahi qol layihəsidir. Biz yüksək dəqiqlik, aşağı gecikmə və mövcud əməliyyat sistemləri ilə inteqrasiya üzərində işləyirik.</textarea>
      </div>
      
      <button onclick="saveContent()" class="save-btn">Dəyişiklikləri Yadda Saxla</button>
      <div id="contentMessage" class="success-message" style="display:none;"></div>
     </div>
    </div>

    <!-- Settings Tab -->
    <div id="settings-tab" class="content-tab">
     <div class="dashboard-section">
      <h3>Ayarlar</h3>
      
      <div class="form-group">
       <label class="form-label">Admin İstifadəçi Adı</label>
       <input type="text" id="settingsUsername" class="admin-input" value="admin">
      </div>
      
      <div class="form-group">
       <label class="form-label">Yeni Parol</label>
       <input type="password" id="settingsPassword" class="admin-input" placeholder="Yeni parol daxil edin...">
      </div>
      
      <div class="form-group">
       <label class="form-label">Parolu Təkrar Edin</label>
       <input type="password" id="settingsPasswordConfirm" class="admin-input" placeholder="Parolu təkrar edin...">
      </div>
      
      <button onclick="saveSettings()" class="save-btn">Ayarları Yadda Saxla</button>
      <div id="settingsMessage" class="success-message" style="display:none;"></div>
     </div>
    </div>

    <!-- Stats Tab -->
    <div id="stats-tab" class="content-tab">
     <div class="dashboard-section">
      <h3>Statistika</h3>
      
      <div class="stats-grid">
       <div class="stat-card">
        <div class="stat-number" id="statVisitors">1,247</div>
        <div class="stat-label">Ziyarətçi</div>
       </div>
       <div class="stat-card">
        <div class="stat-number" id="statPageViews">3,891</div>
        <div class="stat-label">Səhifə Baxışı</div>
       </div>
       <div class="stat-card">
        <div class="stat-number" id="statGalleryViews">2,156</div>
        <div class="stat-label">Qalereya Baxışı</div>
       </div>
       <div class="stat-card">
        <div class="stat-number" id="statAdminLogins">42</div>
        <div class="stat-label">Admin Girişi</div>
       </div>
      </div>
      
      <div class="form-group">
       <label class="form-label">Son Fəaliyyət</label>
       <div id="recentActivity" style="background:white;padding:12px;border-radius:8px;font-size:13px;max-height:150px;overflow-y:auto;">
        <div>✓ Yeni şəkil əlavə edildi - 5 dəq. əvvəl</div>
        <div>✓ Məzmun yeniləndi - 1 saat əvvəl</div>
        <div>⚡ Admin girişi - 2 saat əvvəl</div>
       </div>
      </div>
     </div>
    </div>

   </div>
  </div>
 </div>

 <!-- Image / Video Modal -->
 <div id="imageModal" class="image-modal" aria-hidden="true" tabindex="-1">
  <!-- content appended dynamically -->
 </div>

 <main id="home">
  <!-- BASI -->
  <section class="hero" aria-labelledby="hero-title">
   <div class="lead">
    <h2 id="hero-title" class="title">MedArm</h2>
    <p class="desc">Robot-cərrahi qol — məsafədən əməliyyatlar üçün dəqiq və etibarlı həll. Klinikalar üçün uzaqdan nəzarət və yüksək dəqiqlik.</p>
    <a class="btn" href="#about">Ətraflı</a>
   </div>
   <div class="hero-card" aria-hidden="true">
    <div class="mock img-wrap" style="height:320px;">
     <img src="image/Robot.webp" alt="Robot arm icon" />
    </div>
   </div>
  </section>

  <!-- MELUMAT -->
  <section id="about" aria-labelledby="about-title">
   <div class="section-title">
    <h2 id="about-title">Haqqımızda</h2>
    <div class="small muted">Qısa layihə təsviri</div>
   </div>
   <div class="about">
    <div>
     <p>MedArm — məsafədən cərrahiyyə dəstəyi üçün hazırlanmış robot-cərrahi qol layihəsidir. Biz yüksək dəqiqlik, aşağı gecikmə və mövcud əməliyyat sistemləri ilə inteqrasiya üzərində işləyirik.</p>
    </div>
    <aside class="media" aria-hidden="true">
     <div class="img-wrap" style="height:350px;">
      <img src="image/surgery.png" alt="Surgery icon" />
      <div class="overlay" title="Şəkili dəyişdirin">
       <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 7h3l2-2h6l2 2h3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7z" stroke="#0b63ff" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
        <circle cx="12" cy="13" r="3" stroke="#0b63ff" stroke-width="1.4"/>
       </svg>
      </div>
     </div>
    </aside>
   </div>
  </section>

  <!-- SEKILLER -->
  <section id="gallery" aria-labelledby="gallery-title">
   <div class="section-title">
    <h2 id="gallery-title">Qalereya</h2>
    <div class="small muted">Robotun əməliyyatlarda görüntüləri və videoları</div>
   </div>
   <div class="gallery-grid" role="list" id="galleryGrid">
    <div class="img-wrap" role="listitem" data-type="image">
     <img src="image/Robot.webp" alt="Robot arm" />
     <div class="overlay" title="Şəkili böyüt">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
       <rect x="3" y="3" width="18" height="18" rx="5" stroke="#0b63ff" stroke-width="1.5"/>
       <circle cx="12" cy="12" r="3" stroke="#0b63ff" stroke-width="1.5"/>
      </svg>
     </div>
    </div>
    <div class="img-wrap" role="listitem" data-type="image">
     <img src="https://www.svgrepo.com/show/482984/robot-arm-1.svg" alt="Robot arm 2" />
     <div class="overlay" title="Şəkili böyüt">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
       <rect x="3" y="3" width="18" height="18" rx="5" stroke="#0b63ff" stroke-width="1.5"/>
       <circle cx="12" cy="12" r="3" stroke="#0b63ff" stroke-width="1.5"/>
      </svg>
     </div>
    </div>
    <div class="img-wrap" role="listitem" data-type="image">
     <img src="image/surgery.png" alt="Surgery" />
     <div class="overlay" title="Şəkili böyüt">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
       <rect x="3" y="3" width="18" height="18" rx="5" stroke="#0b63ff" stroke-width="1.5"/>
       <circle cx="12" cy="12" r="3" stroke="#0b63ff" stroke-width="1.5"/>
      </svg>
     </div>
    </div>
    <div class="img-wrap" role="listitem" data-type="image">
     <img src="https://www.svgrepo.com/show/308362/photo-camera.svg" alt="Camera icon" />
     <div class="overlay" title="Şəkili böyüt">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
       <rect x="3" y="3" width="18" height="18" rx="5" stroke="#0b63ff" stroke-width="1.5"/>
       <circle cx="12" cy="12" r="3" stroke="#0b63ff" stroke-width="1.5"/>
      </svg>
     </div>
    </div>
    <div class="img-wrap" role="listitem" data-type="image">
     <img src="image/Robot.webp" alt="Robot arm 3" />
     <div class="overlay" title="Şəkili böyüt">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
       <rect x="3" y="3" width="18" height="18" rx="5" stroke="#0b63ff" stroke-width="1.5"/>
       <circle cx="12" cy="12" r="3" stroke="#0b63ff" stroke-width="1.5"/>
      </svg>
     </div>
    </div>
   </div>
  </section>

  <!-- ELAQE -->
  <section id="contact" aria-labelledby="contact-title">
   <div class="section-title">
    <h2 id="contact-title">Əlaqə</h2>
    <div class="small muted">Bizimlə əlaqə saxlayın</div>
   </div>
   <div class="contacts">
    <div class="contact-card">
     <strong>Email</strong>
     <a href="mailto:medarmtech@gmail.com">medarmtech@gmail.com</a>
     <div style="margin-top:12px"><strong>Telefon</strong>
      <a href="tel:+994552162466">+994 55 216 24 66</a></div>
     <div style="margin-top:12px"><strong>Sosial şəbəkələr</strong>
      <div class="socials">
       <a href="#" aria-label="Instagram" title="Instagram">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
         <rect x="3" y="3" width="18" height="18" rx="5" stroke="#0b63ff" stroke-width="1.5"/>
         <circle cx="12" cy="12" r="3" stroke="#0b63ff" stroke-width="1.5"/>
         <circle cx="17.5" cy="6.5" r="0.5" fill="#0b63ff"/>
        </svg>
       </a>
       <a href="#" aria-label="Facebook" title="Facebook">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
         <path d="M18 2h-3a4 4 0 0 0-4 4v3H8v4h3v8h4v-8h3l1-4h-4V6a1 1 0 0 1 1-1h2V2z" stroke="#0b63ff" stroke-width="1.2" fill="none"/>
        </svg>
       </a>
       <a href="#" aria-label="LinkedIn" title="LinkedIn">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        </svg>
       </a>
      </div>
     </div>
    </div>
   </div>
  </section>

  <footer>
   © <span id="year"></span> MedArm. Bütün hüquqlar qorunur.
  </footer>
 </main>
</div>

<script>
(function(){
 // ---- Basic helpers ----
 function q(sel){return document.querySelector(sel)}
 function qa(sel){return Array.prototype.slice.call(document.querySelectorAll(sel))}

 // ==== Cryptographic helpers (sha-256) ====
 async function sha256(str) {
  const buf = new TextEncoder().encode(str);
  const hashBuffer = await crypto.subtle.digest("SHA-256", buf);
  return Array.from(new Uint8Array(hashBuffer))
   .map(b => b.toString(16).padStart(2, "0"))
   .join("");
 }

 // Storage management
 function getStorage(key) {
  try {
   return JSON.parse(localStorage.getItem(key)) || [];
  } catch {
   return [];
  }
 }

 function setStorage(key, data) {
  try {
   localStorage.setItem(key, JSON.stringify(data));
   return true;
  } catch {
   return false;
  }
 }

 // Initialize storage
 function initStorage() {
  if (!localStorage.getItem('galleryItems')) {
   const defaultItems = [
    { type: 'image', src: 'https://ibb.co/PvK5W9CX' },
    { type: 'image', src: 'image/Robot.webp' },
    { type: 'image', src: 'image/surgery.png' },
    { type: 'image', src: 'https://www.svgrepo.com/show/308362/photo-camera.svg' },
    { type: 'image', src: 'https://www.svgrepo.com/show/499357/robot-arm.svg' }
   ];
   setStorage('galleryItems', defaultItems);
  }
  
  if (!localStorage.getItem('siteContent')) {
   setStorage('siteContent', {
    title: 'MedArm',
    description: 'Robot-cərrahi qol — məsafədən əməliyyatlar üçün dəqiq və etibarlı həll. Klinikalar üçün uzaqdan nəzarət və yüksək dəqiqlik.',
    about: 'MedArm — məsafədən cərrahiyyə dəstəyi üçün hazırlanmış robot-cərrahi qol layihəsidir. Biz yüksək dəqiqlik, aşağı gecikmə və mövcud əməliyyat sistemləri ilə inteqrasiya üzərində işləyirik.'
   });
  }
 }

 document.addEventListener('DOMContentLoaded', function () {
  initStorage();
  loadContentFromStorage();

  // ==== Year ====
  var yearEl = q('#year');
  if (yearEl) yearEl.textContent = new Date().getFullYear();

  // ==== Close mobile menu on nav click ====
  var navToggle = q('#nav-toggle');
  var navLinks = qa('.nav-links a');
  if (navLinks && navToggle) {
   navLinks.forEach(function (link) {
    link.addEventListener('click', function () {
     navToggle.checked = false;
    });
   });
  }

  // ==== Image modal ====
  function initImageModal() {
   const galleryGrid = q('#galleryGrid');
   if (!galleryGrid) return;
   
   galleryGrid.addEventListener('click', function(e) {
    const img = e.target.closest('img');
    const video = e.target.closest('video');
    
    if (img && !img.closest('.admin-gallery-item')) {
     e.preventDefault();
     openModalWithImage(img.src);
    } else if (video && !video.closest('.admin-gallery-item')) {
     e.preventDefault();
     openModalWithVideo(video.src);
    }
   });
  }

  function openModalWithImage(src) {
   const imageModal = q('#imageModal');
   if (!imageModal) return;
   
   imageModal.innerHTML = '';
   const img = document.createElement('img');
   img.setAttribute('src', src);
   img.setAttribute('alt', 'Full image');
   imageModal.appendChild(img);
   imageModal.classList.add('show');
   imageModal.setAttribute('aria-hidden', 'false');
   imageModal.addEventListener('click', modalOutsideClick);
   document.addEventListener('keydown', modalKeyHandler);
  }

  function openModalWithVideo(src) {
   const imageModal = q('#imageModal');
   if (!imageModal) return;
   
   imageModal.innerHTML = '';
   const video = document.createElement('video');
   video.setAttribute('src', src);
   video.setAttribute('controls', '');
   video.setAttribute('autoplay', '');
   imageModal.appendChild(video);
   imageModal.classList.add('show');
   imageModal.setAttribute('aria-hidden', 'false');
   imageModal.addEventListener('click', modalOutsideClick);
   document.addEventListener('keydown', modalKeyHandler);
  }

  function modalOutsideClick(e){
   if(e.target===q('#imageModal')) closeModal();
  }

  function modalKeyHandler(e){
   if(e.key==='Escape') closeModal();
  }

  function closeModal(){
   const imageModal = q('#imageModal');
   if (!imageModal) return;
   
   imageModal.classList.remove('show');
   imageModal.setAttribute('aria-hidden','true');
   imageModal.innerHTML='';
   imageModal.removeEventListener('click', modalOutsideClick);
   document.removeEventListener('keydown', modalKeyHandler);
  }

  // ==== Header hide/show on scroll ====
  var header = q('header');
  if (header) {
   var lastScrollY = window.pageYOffset || document.documentElement.scrollTop || 0;
   var ticking = false;
   var delta = 8;
   var showOffset = 64;
   header.classList.remove('hidden');
   header.classList.add('visible');

   window.addEventListener('scroll', function(){
    lastKnownScrollY = window.pageYOffset || document.documentElement.scrollTop || 0;
    if (!ticking){
     window.requestAnimationFrame(updateHeader);
     ticking = true;
    }
   }, {passive:true});

   var lastKnownScrollY = lastScrollY;
   function updateHeader(){
    var currentY = lastKnownScrollY;
    var diff = currentY - lastScrollY;
    if(diff>delta && currentY>showOffset){
     header.classList.remove('visible');
     header.classList.add('hidden');
    } else if(diff<-delta || currentY<=showOffset){
     header.classList.remove('hidden');
     header.classList.add('visible');
    }
    lastScrollY=currentY;
    ticking=false;
   }
  }

  // ==== Admin panel ====
  // Хеши (SHA-256) - admin/admin
  const ADMIN_USER_HASH = "8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918";
  const ADMIN_PASS_HASH = "8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918";

  // Elements
  const adminPanel = q('#adminPanel');
  const loginFormEl = q('#loginForm');
  const adminDashboardEl = q('#adminDashboard');
  const loginErrorEl = q('#loginError');
  const adminGalleryGrid = q('#adminGalleryGrid');
  const galleryGrid = q('#galleryGrid');

  // Tab switching
  window.switchTab = function(tabName) {
   // Hide all tabs
   qa('.content-tab').forEach(tab => tab.classList.remove('active'));
   qa('.admin-tab').forEach(tab => tab.classList.remove('active'));
   
   // Show selected tab
   q(`#${tabName}-tab`).classList.add('active');
   qa('.admin-tab').forEach(tab => {
    if (tab.textContent.includes(getTabDisplayName(tabName))) {
     tab.classList.add('active');
    }
   });
   
   if (tabName === 'gallery') {
    updateStats();
   }
  }

  function getTabDisplayName(tabName) {
   const names = {
    gallery: 'Qalereya',
    content: 'Məzmun',
    settings: 'Ayarlar',
    stats: 'Statistika'
   };
   return names[tabName] || tabName;
  }

  // Open/close admin panel
  function openAdminPanel(){
   adminPanel.classList.add('show');
   adminPanel.setAttribute('aria-hidden','false');
   showLogin();
   populateAdminFromStorage();
   setTimeout(()=>{
    const u=q('#username');
    if(u) u.focus();
   }, 120);
  }

  function closeAdminPanel(){
   if(adminPanel){
    adminPanel.classList.remove('show');
    adminPanel.setAttribute('aria-hidden','true');
   }
  }

  // Show login/dashboard
  function showLogin(msg){
   if(!loginFormEl || !adminDashboardEl) return;
   loginFormEl.style.display='';
   adminDashboardEl.classList.remove('show');
   adminDashboardEl.setAttribute('aria-hidden','true');
   loginFormEl.setAttribute('aria-hidden','false');
   if(msg){
    loginErrorEl.style.display='block';
    loginErrorEl.textContent=msg;
   } else {
    loginErrorEl.style.display='none';
    loginErrorEl.textContent='';
   }
  }

  function showDashboard(){
   if(!loginFormEl || !adminDashboardEl) return;
   loginFormEl.style.display='none';
   adminDashboardEl.classList.add('show');
   adminDashboardEl.setAttribute('aria-hidden','false');
   loginFormEl.setAttribute('aria-hidden','true');
   loginErrorEl.style.display='none';
   loginErrorEl.textContent='';
   updateStats();
  }

  // Admin login/logout
  async function adminLogin(e){
   if(e && e.preventDefault) e.preventDefault();
   const username = (q('#username')?.value || '').trim();
   const password = (q('#password')?.value || '');

   // compute hashes
   const userHash = await sha256(username);
   const passHash = await sha256(password);

   if (userHash === ADMIN_USER_HASH && passHash === ADMIN_PASS_HASH) {
    showDashboard();
    populateAdminFromStorage();
   } else {
    if(loginErrorEl){
     loginErrorEl.style.display='block';
     loginErrorEl.textContent='İstifadəçi adı və ya parol səhvdir.';
    }
   }
   if(q('#password')) q('#password').value='';
  }

  function adminLogout(){
   showLogin();
   if(q('#username')) q('#username').value='';
   if(q('#password')) q('#password').value='';
  }

  // Load content from storage
  function loadContentFromStorage() {
   const content = getStorage('siteContent');
   if (content.title) {
    q('#hero-title').textContent = content.title;
    q('title').textContent = content.title + ' — Robot-cərrahi qol';
   }
   if (content.description) {
    q('.desc').textContent = content.description;
   }
   if (content.about) {
    q('#about p').textContent = content.about;
   }
  }

  // Populate admin from storage
  function populateAdminFromStorage(){
   const items = getStorage('galleryItems');
   renderPublicGallery(items);
   renderAdminGallery(items);
   updateStats();
  }

  // Render public gallery
  function renderPublicGallery(items) {
   if (!galleryGrid) return;
   
   galleryGrid.innerHTML = '';
   items.forEach(item => {
      const wrapper = document.createElement('div');
      wrapper.className = 'img-wrap';
      wrapper.setAttribute('data-type', item.type);
      wrapper.setAttribute('role', 'listitem');
      wrapper.style.cursor = 'pointer';

      if (item.type === 'youtube') {
         // Для YouTube - показываем превью и открываем в новом окне
         const img = document.createElement('img');
         img.setAttribute('src', item.thumb || 'https://img.youtube.com/vi/' + item.videoId + '/hqdefault.jpg');
         img.setAttribute('alt', 'YouTube video');
         img.style.width = '100%';
         img.style.height = '100%';
         img.style.objectFit = 'cover';
         
         wrapper.appendChild(img);
         
         // При клике открываем видео в новом окне
         wrapper.onclick = function() {
            window.open(item.src, '_blank');
         };
         
      } else if (item.type === 'video') {
         const video = document.createElement('video');
         video.setAttribute('src', item.src);
         video.setAttribute('controls', '');
         video.setAttribute('preload', 'metadata');
         video.style.width = '100%';
         video.style.height = '100%';
         video.style.objectFit = 'contain';
         wrapper.appendChild(video);
      } else {
         const img = document.createElement('img');
         img.setAttribute('src', item.src);
         img.setAttribute('alt', 'Gallery image');
         img.style.width = '100%';
         img.style.height = '100%';
         img.style.objectFit = 'contain';
         wrapper.appendChild(img);
      }

      // Overlay только для изображений и обычных видео
      if (item.type !== 'youtube') {
         const overlay = document.createElement('div');
         overlay.className = 'overlay';
         overlay.setAttribute('title', item.type === 'video' ? 'Videonu bax' : 'Şəkili böyüt');
         overlay.innerHTML = '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="3" width="18" height="18" rx="5" stroke="#0b63ff" stroke-width="1.5"/><circle cx="12" cy="12" r="3" stroke="#0b63ff" stroke-width="1.5"/></svg>';
         wrapper.appendChild(overlay);
      } else {
         // Для YouTube добавляем иконку play
         const playOverlay = document.createElement('div');
         playOverlay.className = 'overlay';
         playOverlay.innerHTML = '<svg width="48" height="48" viewBox="0 0 24 24" fill="#ff0000" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7z"/></svg>';
         playOverlay.style.background = 'rgba(255,255,255,0.9)';
         wrapper.appendChild(playOverlay);
      }

      galleryGrid.appendChild(wrapper);
   });
   
   initImageModal();
  }

  // Render admin gallery
  function renderAdminGallery(items) {
   if (!adminGalleryGrid) return;
   
   adminGalleryGrid.innerHTML = '';
   items.forEach((item, index) => {
      const wrapper = document.createElement('div');
      wrapper.className = 'admin-gallery-item';
      wrapper.setAttribute('data-src', item.src);
      wrapper.setAttribute('data-type', item.type);

      if (item.type === 'youtube') {
         const img = document.createElement('img');
         img.setAttribute('src', item.thumb || 'https://img.youtube.com/vi/' + item.videoId + '/hqdefault.jpg');
         img.setAttribute('alt', 'YouTube video');
         wrapper.appendChild(img);
      } else if (item.type === 'video') {
         const vid = document.createElement('video');
         vid.setAttribute('src', item.src);
         vid.setAttribute('muted', '');
         vid.setAttribute('playsinline', '');
         vid.setAttribute('preload', 'metadata');
         wrapper.appendChild(vid);
      } else {
         const img = document.createElement('img');
         img.setAttribute('src', item.src);
         img.setAttribute('alt', 'Gallery image');
         wrapper.appendChild(img);
      }

      const controls = document.createElement('div');
      controls.className = 'admin-item-controls';
      
      const typeLabel = document.createElement('div');
      typeLabel.textContent = item.type === 'youtube' ? 'YouTube' : item.type;
      typeLabel.style.fontWeight = 'bold';
      typeLabel.style.color = item.type === 'youtube' ? '#ff0000' : '#0b63ff';
      
      const removeBtn = document.createElement('button');
      removeBtn.className = 'admin-remove-btn';
      removeBtn.textContent = 'Sil';
      removeBtn.addEventListener('click', function(){
         items.splice(index, 1);
         setStorage('galleryItems', items);
         populateAdminFromStorage();
         showMessage('contentMessage', 'Element silindi!', 'success');
      });

      controls.appendChild(typeLabel);
      controls.appendChild(removeBtn);
      wrapper.appendChild(controls);
      adminGalleryGrid.appendChild(wrapper);
   });
  }

  // Update statistics
  function updateStats() {
   const items = getStorage('galleryItems');
   const images = items.filter(item => item.type === 'image').length;
   const videos = items.filter(item => item.type === 'video' || item.type === 'youtube').length;
   
   if (q('#totalImages')) q('#totalImages').textContent = images;
   if (q('#totalVideos')) q('#totalVideos').textContent = videos;
   if (q('#totalItems')) q('#totalItems').textContent = items.length;
  }

  // File upload handling
  window.handleFileUpload = function(files) {
   if (!files.length) return;
   
   const items = getStorage('galleryItems');
   const allowedTypes = [
      'image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp',
      'video/mp4', 'video/webm', 'video/ogg', 'video/quicktime', 'video/x-msvideo'
   ];
   
   Array.from(files).forEach(file => {
    if (allowedTypes.includes(file.type)) {
     const reader = new FileReader();
     reader.onload = function(e) {
      const type = file.type.startsWith('image/') ? 'image' : 'video';
      items.push({ type, src: e.target.result });
      setStorage('galleryItems', items);
      populateAdminFromStorage();
      showMessage('contentMessage', 'Fayl uğurla yükləndi!', 'success');
     };
     reader.readAsDataURL(file);
    } else {
     alert('Desteklenmeyen format: ' + file.type);
    }
   });
  }

  // Drag and drop
  const uploadArea = q('#uploadArea');
  if (uploadArea) {
   uploadArea.addEventListener('dragover', function(e) {
    e.preventDefault();
    this.classList.add('dragover');
   });
   
   uploadArea.addEventListener('dragleave', function(e) {
    e.preventDefault();
    this.classList.remove('dragover');
   });
   
   uploadArea.addEventListener('drop', function(e) {
    e.preventDefault();
    this.classList.remove('dragover');
    handleFileUpload(e.dataTransfer.files);
   });
  }

  // Add image from URL
  window.addImageAdmin = function(){
   const url = (q('#adminImageUrl')?.value || '').trim();
   if(!url) return alert('Şəkil URL-i daxil edin.');
   
   const items = getStorage('galleryItems');
   items.push({ type: 'image', src: url });
   setStorage('galleryItems', items);
   populateAdminFromStorage();
   if(q('#adminImageUrl')) q('#adminImageUrl').value='';
   showMessage('contentMessage', 'Şəkil əlavə edildi!', 'success');
  }

  // Add video from URL
  window.addVideoAdmin = function(){
   const url = (q('#adminVideoUrl')?.value || '').trim();
   if(!url) return alert('Video URL-i daxil edin.');
   
   const items = getStorage('galleryItems');
   
   // Для YouTube ссылок используем превью + ссылку
   if (url.includes('youtube.com') || url.includes('youtu.be')) {
      const videoId = getYouTubeId(url);
      if (videoId) {
         const thumbUrl = `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
         items.push({ 
            type: 'youtube', 
            src: url,
            thumb: thumbUrl,
            videoId: videoId
         });
      }
   } else {
      // Для обычных видео
      items.push({ type: 'video', src: url });
   }
   
   setStorage('galleryItems', items);
   populateAdminFromStorage();
   if(q('#adminVideoUrl')) q('#adminVideoUrl').value='';
   showMessage('contentMessage', 'Video əlavə edildi!', 'success');
  }

  // Функция для получения YouTube ID
  function getYouTubeId(url) {
   let videoId = '';
   
   if (url.includes('youtube.com/watch?v=')) {
      videoId = url.split('v=')[1].split('&')[0];
   } else if (url.includes('youtu.be/')) {
      videoId = url.split('youtu.be/')[1].split('?')[0];
   } else if (url.includes('youtube.com/embed/')) {
      videoId = url.split('embed/')[1].split('?')[0];
   }
   
   return videoId;
  }

  // Save content
  window.saveContent = function() {
   const content = {
    title: q('#contentTitle').value,
    description: q('#contentDescription').value,
    about: q('#contentAbout').value
   };
   
   if (setStorage('siteContent', content)) {
    loadContentFromStorage();
    showMessage('contentMessage', 'Məzmun uğurla yeniləndi!', 'success');
   } else {
    showMessage('contentMessage', 'Xəta baş verdi!', 'error');
   }
  }

  // Save settings
  window.saveSettings = function() {
   const newPassword = q('#settingsPassword').value;
   const confirmPassword = q('#settingsPasswordConfirm').value;
   
   if (newPassword && newPassword !== confirmPassword) {
    showMessage('settingsMessage', 'Parollar uyğun gəlmir!', 'error');
    return;
   }
   
   showMessage('settingsMessage', 'Ayarlar yadda saxlanıldı!', 'success');
   q('#settingsPassword').value = '';
   q('#settingsPasswordConfirm').value = '';
  }

  // Show message
  function showMessage(elementId, message, type) {
   const element = q(`#${elementId}`);
   if (!element) return;
   
   element.textContent = message;
   element.className = type === 'success' ? 'success-message' : 'error-message';
   element.style.display = 'block';
   
   setTimeout(() => {
    element.style.display = 'none';
   }, 3000);
  }

  // Event listeners
  if(adminPanel){
   adminPanel.addEventListener('click', function(e){
    if(e.target === adminPanel) closeAdminPanel();
   });
  }

  document.addEventListener('keydown', (e)=>{
   if(e.key==='Escape'){
    if(q('#imageModal') && q('#imageModal').classList.contains('show')) closeModal();
    else if(adminPanel && adminPanel.classList.contains('show')) closeAdminPanel();
   }
  });

  const adminButtons = document.querySelectorAll('[data-action="admin"]');
  if(adminButtons.length){
   adminButtons.forEach(btn => btn.addEventListener('click', (ev)=>{
    ev.preventDefault();
    openAdminPanel();
   }));
  }

  if(loginFormEl) loginFormEl.addEventListener('submit', adminLogin);

  // Expose functions
  window.adminLogin = adminLogin;
  window.closeAdminPanel = closeAdminPanel;
  window.addImageAdmin = addImageAdmin;
  window.addVideoAdmin = addVideoAdmin;
  window.adminLogout = adminLogout;
  window.saveContent = saveContent;
  window.saveSettings = saveSettings;
  window.handleFileUpload = handleFileUpload;
  window.switchTab = switchTab;

  // Initialize
  populateAdminFromStorage();
  initImageModal();
 });
})();
</script>
</body>
</html>